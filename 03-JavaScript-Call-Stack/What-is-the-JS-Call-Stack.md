# 자바스크립트 콜스택(Call Stack)이란?

## 콜스택을 배우기 앞서 "스택(Stack)"이란?

스택(Stack)은 **후입선출(LIFO: Last-In, First-Out)** 방식으로 동작하는 자료구조이다.

- **삽입(push)**: 데이터를 맨 위에 쌓는다.
- **삭제(pop)**: 가장 나중에 쌓인 데이터를 먼저 꺼낸다.

실 생활을 예로 들어보자!  
찬장에 있는 그릇을 넣었다가 꺼낸다고 생각했을 때,

1. 바닥에 접시를 하나 올리고
2. 그 위에 또 올리고
3. 또 올린 후
4. 그릇을 꺼낼 때는 가장 위에 올린 접시부터 꺼내서 사용하는 것

과 같다.

이렇게 **나중에 들어온 것이 먼저 나간다**는 특징이 스택의 핵심이다.

## 그렇다면 콜스택(Call Stack)이란?

콜스택(Call Stack)은 자바스크립트 엔진이 함수 호출을 관리하는 자료구조로, LIFO(Last-In, First-Out) 방식으로 동작한다. 순차적으로 실행되는 자바스크립트 코드에서 **함수가 호출**되면, 해당 콜스택에 프레임이 **쌓이고(push)**, 실행이 끝난 후엔 프레임이 **스택에서 빠져나가(pop)** 는 과정을 반복한다.

- 프레임(frame): 함수 실행에 필요한 모든 정보(매개변수·지역변수·실행 위치·this 등)를 담은 콜스택 위에 쌓이는 실행 컨텍스트의 단위

**정리**

1. 함수 호출
2. 콜스택에 프레임 쌓임 (push)
3. 실행
4. 콜스택에서 실행이 끝난 프레임 빠짐 (pop)

## 콜스택의 역할

- **호출 순서 관리**

  여러 함수가 중첩해서 호출될 때 어떤 함수가 먼저, 어떤 함수가 나중에 실행을 끝내야 할지 콜스택이 결정한다.

- **실행 컨텍스트 저장**

  각 함수의 매개변수, 지역 변수, 실행 위치(다음에 어디부터 실행할지) 등의 정보를 프레임에 담아두고 관리한다.

## 콜스택의 동작 방식

### 예시 코드

```javascript
function foo() {
	console.log('A');
	bar();
	console.log('B');
}

function bar() {
	console.log('C');
}

console.log('Start');
foo();
console.log('End');
```

### 코드 설명

1. 전역 코드가 실행되면 자바스크립트 엔진은 **Global Execution Context**를 스택에 쌓는다.
2. 함수 `foo()`를 호출하면, 그 실행 컨텍스트를 새 프레임으로 만들어 스택에 쌓는다.
3. `foo()` 안에서 다시 `bar()`를 호출하면, `bar()` 실행 컨텍스트를 또 쌓는다.
4. `bar()`가 실행을 마치면 스택에서 `bar()` 프레임을 꺼내고, 다시 `foo()`로 돌아가서 실행을 이어간다.

### 코드 실행 결과

1. `console.log('Start')` → **Start**
2. `foo()` 호출

   - `console.log('A')` → **A**
   - `bar()` 호출

     - `console.log('C')` → **C**

   - `console.log('B')` → **B**

3. `console.log('End')` → **End**

**결과**: Start - A - C - B - End

## 만약 함수가 무한히 재귀 호출 된다면?

만약 함수가 무한히 재귀 호출된다면, 콜스택이 가득 차서 `Maximum call stack size exceeded` 에러가 발생한다. 이를 콜스택 오버플로우(Call Stack Overflow)라고 부른다.

```javascript
function recurse() {
	recurse(); // 끝없이 자기 자신을 호출
}
recurse(); // ➔ RangeError: Maximum call stack size exceeded
```

## 정리

1. 자바스크립트에서 콜스택은 함수 호출 순서를 **스택 자료구조**로 관리
2. 실행 컨텍스트(매개변수, 변수, 실행 위치)를 **프레임**에 담아 보관
3. **LIFO** 방식으로 쌓고(pop/push) 꺼내며 실행 흐름을 제어
   를 담당
